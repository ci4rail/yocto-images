header:
  version: 11

repos:
  src/bitbake:
    url: "https://github.com/openembedded/bitbake.git"
    refspec: da306cd4430a6fcf6b62ed0e6e5310432aa4c4c4
    layers:
      # bitbake is no layer. Exclude it from bblayers.conf
      bitbake: "no"

  src/meta-yocto:
    url: "https://git.yoctoproject.org/git/meta-yocto.git"
    refspec: febea5f6be380fed476552d741dc97e9c78ebdd9
    layers:
      meta-poky:

  src/openembedded-core:
    url: "https://github.com/openembedded/openembedded-core.git"
    refspec: 707036d4ec12ef1a260adcef78627b26e32e6540
    layers:
      meta:

  src/meta-openembedded:
    url: "https://github.com/openembedded/meta-openembedded.git"
    refspec: 389757a7494221fea1d8437e9a01c6e4fb4700af
    layers:
      meta-oe:
      meta-networking:
      meta-filesystems:
      meta-python:
      meta-xfce:
      meta-gnome:
      meta-multimedia:
      meta-initramfs:

bblayers_conf_header:
  src/meta-custom: |
    BBPATH = "${TOPDIR}"
    BBFILES ?= ""

local_conf_header:
  src/meta-ci4rail-general: |
    DL_DIR ?= "/downloads"
    SSTATE_DIR ?= "/sstate-cache"
    DEPLOY_DIR = "/install"
    PACKAGE_CLASSES ?= "package_ipk"
    USER_CLASSES ?= "buildstats image-mklibs image-prelink"
    PATCHRESOLVE = "noop"
    BB_DISKMON_DIRS ??= "\
        STOPTASKS,${TMPDIR},1G,100K \
        STOPTASKS,${DL_DIR},1G,100K \
        STOPTASKS,${SSTATE_DIR},1G,100K \
        STOPTASKS,/tmp,100M,100K \
        ABORT,${TMPDIR},100M,1K \
        ABORT,${DL_DIR},100M,1K \
        ABORT,${SSTATE_DIR},100M,1K \
        ABORT,/tmp,10M,1K"
    INHERIT += "rm_work"
    DISTRO_FEATURES_append = " systemd"
    VIRTUAL-RUNTIME_init_manager = "systemd"
    DISTRO_FEATURES_BACKFILL_CONSIDERED = "sysvinit"
    VIRTUAL-RUNTIME_initscripts = ""
    FETCHCMD_wget = "/usr/bin/env wget -t 5 -T 30 --waitretry=10 --passive-ftp --no-check-certificate"

env:
  IMAGE_NAME_SUFFIX: ""
  IMAGE_GIT_VERSION: "NoVersion"
